---
index: 4
---

# 框架

如果使用 `pnpm` 创建 `Preezid` 项目, 项目中将会自带如下开箱即用的 `Preezid` 框架.

## 文件结构

`Preezid` 项目的文件结构通常如下所示:

```plaintext
project-root/
├── app/
│   ├── apis/            # 存放可复用组件
│   ├── assets/          # 存放静态资源如图片, 样式表等
│   ├── components/      # 存放可复用组件
│   ├── layouts/         # 存放布局文件
│   ├── pages/           # 存放页面组件
│   ├── utils/           # 存放工具函数
│   └── app.config.ts    # 应用配置文件
├── public/              # 公共资源文件夹
├── preezid.config.ts    # Preezid 配置文件
├── .env                 # 环境变量文件
├── .gitignore           # Git 忽略文件
└── package.json         # 项目依赖和脚本
```

## `pages` 页面文件夹

`pages` 目录用于存放页面组件, 每个页面组件都将会被自动注册路由.

1. 基础路由文件

    `pages/filename.lts` 将被直接注册为基础路由 `/filename`, 同理 `pages/info/about.lts` 将被注册为 `/info/about`.

2. 动态路由文件

    `pages/filename/{param}.lts` 将被注册为动态路由 `/filename/{param}`, 例如 `pages/user/{id}.lts` 将被注册为 `/user/{id}`.

此外, `*/index.lts` 文件将被注册为各个文件的根路由 `*/`, `index.lts` 将被注册为总跟路由 `/`.

由于文件与路由的一对一映射关系, 故仅支持 `单文件组件(SFC)` 作为页面组件, 若页面复杂, 可将页面拆分为多个子组件, 并存放在 `components/[pages]/` 目录下.

## `components` 组件文件夹

`components` 目录用于存放可复用的组件或页面强相关的组件, 它们将被自动注册为全局组件, 可在任何页面或其他组件中直接使用.

`Preezid` 将使用如下的方案注册组件:

```plaintext
components/
├── common/              # 公共组件, 如按钮, 输入框等
│   └── [components]     # 该部分组件将直接以组件名注册为全局组件
├── base/                # 基础组件, 如导航栏, 页脚等
│   └── [components]     # 该部分组件将直接以组件名注册为全局组件
└── [pages]/             # 页面相关组件, 如文章列表, 用户信息等
    └── [components]     # 该部分组件将以 "页面名/组件名" 的形式注册到对应的页面下
```

例如:

```plaintext
components/
├── common/
│   └── Button.lts        # 注册为全局组件 Button
├── base/
│   └── Header.lts        # 注册为全局组件 Header
└── Home/
    └── ArticleList.lts   # 注册为 HomeArticleList 组件, 只能在 Home 及其子页面中使用
```

一般组件均为 `单文件组件(SFC)`, 但对于复杂组件, 可使用如下的结构:

```plaintext
[component name]/
├── index.lts             # 组件主文件
├── component-files1.lts  # 组件相关文件
└── component-files2.lts  # 组件相关文件
```

这样的组件只有 `index.lts` 会被注册, 且命名为组件文件夹的名称.

此外, 自动注册不会区分依赖组件, 只能当成普通组件处理. 但当其他文件有通过依赖组件的方式加载该组件时, `Preezid` 才会按类型注册该组件.

## `layouts` 布局文件夹

`layouts` 目录用于存放布局文件, 布局文件定义了页面的整体结构和样式, 如头部, 底部, 侧边栏等.

可选择不使用布局文件, 但推荐使用布局文件以实现更好的代码复用和结构化.

`layouts` 下每个文件(多文件组件处理方法同上)都将被自动注册为一个全局布局组件.

```lts
load {
  div {
    Header // components/base/Header.lts 组件, 该组件已被自动注册并导入
    slot // 页面内容将被插入到此处
    Footer
  }
}
```

`Preezid` 将未所有页面添加 `layouts/default.lts` 作为默认布局(若文件存在), 除非页面组件中使用 `useLayout()` 指定其他布局.

```lts
define {
  useLayout("custom") // 指定使用 layouts/custom.lts 作为布局
  // 若不指定 useLayout(), 则使用 layouts/default.lts 作为默认布局
  // 若指定 useLayout() 留空, 则不使用任何布局
}
```

## `apis` API 文件夹

`apis` 目录用于存放与后端交互的 API 函数, 以实现数据的获取和提交.

`apis` 下的每个文件都可导出多个 API 函数, 这些函数可在页面或组件中直接导入使用.

```ts
interface User {
  id: number
  name: string
}

interface GetInfoResponse {
  success: boolean
  data: User
}

export const getUserInfoAPI = () => {
  return useFetch.get<GetInfoResponse>("/api/user/info")
}
```

`apis` 下的文件中标记导出且以 `API` 结尾的函数为 API 函数, 它附属的 `interface` 也将被一并导出. 但为了防止混乱, API 函数不会全局注册, 本体仍需手动导入.

```lts
define {
  import { getUserInfoAPI } from "@/apis/userAPI.lts"

  const data = status<User | null>(null)
  void getUserInfoAPI()
    .then(response => {
      data.value = response.data
    })
    .catch(error => {
      console.error("Failed to fetch user info:", error)
    })
}
```

## `utils` 工具文件夹

设计中...

## `app.config.ts` 应用配置文件

```ts
export default useAppConfig({
  // 设计中
})
```

配置中, 可以为 `components` 目录中自动注册和导入的组件设置前缀, 以防止命名冲突.

也可为 `apis` 中配套导入的 `interface` 设置前缀.

_上述配置也可在对应文件夹/子文件夹内使用 `config.ts` 来配置._

## `preezid.config.ts` Preezid 配置文件

设计中...
