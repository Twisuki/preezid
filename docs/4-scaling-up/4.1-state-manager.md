---
index: 1
---

# 状态管理

与其他前端框架类似, `Preezid` 默认提供了状态管理办法.

## Status API

与 `vue` 的 `ref()` 类似, `Preezid` 使用 `status()` 来创建响应式状态.

`status()` 会返回一个包含 `.value` 属性的对象, 该属性用于存储实际状态值.

该值可以直接调用, 也可直接修改, 并在修改时触发对应元素的自动更新.

```lts
define {
  const count = status(0)
}

load("preezid") {
  button.@click(() => count.value++) { "Count is:" + count.value }
}
```

## Store API

对于更复杂的状态管理, `Preezid` 默认提供了 `store()` 来创建全局状态存储.

`store()` 会返回一个包含 `.get()` 和 `.set()` 方法的对象, 用于获取和修改存储的状态值, 以保证数据的安全和 API 的统一.

```lts
define {
  const counterStore = store(0)
  
  const increment = () => {
    counterStore.set(self => self + 1)
  }
}

load {
  button.@click(increment) { "Count is:" + counterStore.get() }
}
```

## Local API

`Preezid` 默认提供了一个存储在 `localStorage` 中的简单持久化存储方案, `useLocal()`.

与 `store()` 类似, `local()` 会返回包括 `.get()`, `.set()` 方法的对象.

当声明 `useLocal()` 时, 需要传入一个键名, 用于在 `localStorage` 中存储数据, 同时也可以链式调用 `.default()` 方法来设置默认值.

```lts
define {
  const themeStore = useLocal<"light" | "dark">("theme").default("light")
  // 若 localStorage 中无 "theme" 键, 则使用默认值, 否则使用存储的值
  // 此外, 如果无论 localStorage 中是否存在该键, 都想重置为新值, 则使用 .init() 方法
  // const themeStore = useLocal<"light" | "dark">("theme").init("light")
  
  const toggle = () => {
    if (themeStore.get() === "light") {
      themeStore.set("dark")
    } else {
      themeStore.set("light")
    }
  }
  
  const reset = () => {
    themeStore.set("light")
  }
}
```
